<div *ngIf="model" class="container">

	<h2 *ngIf="editMode" class="title">{{modelName}} Details</h2>
	<h2 *ngIf="!editMode">Add {{modelName}}</h2>

	<div *ngIf="editMode"><label>id: </label>{{model.id}}</div>

	<form (ngSubmit)="save()" #detailForm="ngForm">

		<div class="form-group">
			<label for="item">Item</label>
			<input
				type="text"
				class="form-control"
				id="item"
				required
				[(ngModel)]="model.item"
				name="item"
				#item="ngModel"
				placeholder="item name"
				title="Name the item or transaction">
			<div
				[hidden]="item.valid || item.pristine"
				class="alert alert-danger"
				>Item Name is required</div>
		</div>

		<div class="form-group">
			<label for="flatnumber">Flat Number</label>
			<select
				class="form-control"
				id="flatnumber"
				[(ngModel)]="model.flat_number"
				(ngModelChange)="onFlatNumberChange($event)"
				name="flatnumber"
				#flatnumber="ngModel"
				title="Flat associated to transaction">
				<option [value]="">NA</option>
				<option
					*ngFor="let flat of flats"
					[value]="flat.flat_number"
				 >{{flat.flat_number}}</option>
			</select>
		</div>

		<div class="form-group">
			<label for="name">Name</label>
			<input
				type="text"
				class="form-control"
				list="residentNames"
				id="name"
				required
				[(ngModel)]="model.name"
				name="name"
				#name="ngModel"
				placeholder="name"
				title="Person associated to transaction">
			<datalist id="residentNames">
				<option *ngFor="let resident of residents" [value]="resident.first_name">
			</datalist>
			<div
				[hidden]="name.valid || name.pristine"
				class="alert alert-danger"
				>Name is required</div>
		</div>

		<div class="form-group">
			<label for="forMonth">Transaction for the month of</label>
			<select
				class="form-control"
				id="forMonth"
				required
				[(ngModel)]="model.for_month"
				name="forMonth"
				#forMonth="ngModel"
				title="month, transaction belongs to">
				<option
					*ngFor="let month of months"
					[value]="month.number"
				 >{{month.shortName}}</option>
			</select>
			<div
				[hidden]="forMonth.valid || forMonth.pristine"
				class="alert alert-danger"
				>Month is required</div>
		</div>

		<div class="form-group">
			<label for="forYear">Transaction in the year of</label>
			<input
				type="number"
				class="form-control"
				id="forYear"
				required
				[(ngModel)]="model.for_year"
				name="forYear"
				#forYear="ngModel"
				min="2016"
				max="2020"
				placeholder="for the year"
				title="year, transaction belongs to">
			<div
				[hidden]="forYear.valid || forYear.pristine"
				class="alert alert-danger"
				>Year is required</div>
		</div>

		<div class="form-group">
			<input type="radio" value="cr" name="crdr" [(ngModel)]="model.crdr" required /> Cr
			<input type="radio" value="dr" name="crdr" [(ngModel)]="model.crdr" /> Dr
		</div>

		<div class="form-group">
			<label for="amount">Transaction Amount</label>
			<input
				type="number"
				step="0.01"
				class="form-control"
				id="amount"
				required
				[(ngModel)]="model.amount"
				name="amount"
				#amount="ngModel"
				placeholder="Amount here"
				title="Transacting amount">
			<div
				[hidden]="amount.valid || amount.pristine"
				class="alert alert-danger"
				>Amount is required</div>
		</div>

		<div class="form-group">
			<label for="category">Category</label>
			<select
				class="form-control"
				id="category"
				required
				[(ngModel)]="model.category"
				name="category"
				#category="ngModel"
				title="category, transaction falls into">
				<option
					*ngFor="let category of categories"
					[value]="category"
				 >{{category}}</option>
			</select>
			<div
				[hidden]="category.valid || category.pristine"
				class="alert alert-danger"
				>Category is required</div>
		</div>

		<div class="form-group">
			<label for="remarks">Remarks</label>
			<textarea
				class="form-control"
				id="remarks"
				[(ngModel)]="model.remarks"
				name="remarks"
				rows="2"
				placeholders="Enter remarks here"
				title="Details about transaction"
				></textarea>
		</div>

		<div class="form-group">
			<label for="recordedAt">Date of Transaction</label>
			<input
				type="date"
				class="form-control"
				id="recordedAt"
				required
				[(ngModel)]="model.recorded_at"
				name="recordedAt"
				#recordedAt="ngModel"
				placeholder="Date of transaction"
				title="Date on which transaction occurred">
				<!--div
					[hidden]="recordedAt.valid || recordedAt.pristine"
					class="alert alert-danger"
					>Date of Txn is required</div-->
		</div>

		<!--div class="form-group">
			<label for="recDate">Date of Transaction</label>
			<input
				type="date"
				class="form-control"
				id="recDate"
				required
				[ngModel]="model.recorded_at | date: 'yyyy-MM-dd'"
				(ngModelChange)="model.recorded_at = $event"
				name="recDate"
				#recDate
				placeholder="Date of transaction"
				title="Date on which transaction occurred">
		</div-->


		<button
			type="submit"
			class="btn btn-success"
			[disabled]="!detailForm.form.valid"
			[hidden]="hideSave"
			title="Save changes made"
			>Save</button>
		<button
			type="button"
			class="btn btn-link"
			(click)="gotoList()"
			title="Cancel changes made"
			>Cancel</button>

	</form>

</div>
