<div *ngIf="model" class="container">

	<h2 *ngIf="editMode" class="title">{{modelName}} Details</h2>
	<h2 *ngIf="!editMode">Add {{modelName}}</h2>

	<div *ngIf="editMode"><label>id: </label>{{model.id}}</div>

	<form (ngSubmit)="save()" #detailForm="ngForm">

		<div class="form-group">
			<label for="item">Item</label>
			<input
				type="text"
				class="form-control"
				id="item"
				required
				[(ngModel)]="model.item"
				name="item"
				#item="ngModel"
				placeholder="item name">
			<div
				[hidden]="item.valid || item.pristine"
				class="alert alert-danger"
				>Item Name is required</div>
		</div>

		<div class="form-group">
			<label for="flatnumber">Flat Number</label>
			<select
				class="form-control"
				id="flatnumber"
				required
				[(ngModel)]="model.flat_number"
				(ngModelChange)="onFlatNumberChange($event)"
				name="flatnumber"
				#flatnumber="ngModel">
				<!--option
					*ngFor="let flatNumber of flatNumbers"
					[value]="flatNumber"
					>{{flatNumber}}</option-->
				<option
					*ngFor="let flat of flats"
					[value]="flat.flat_number"
				 >{{flat.flat_number}}</option>
			</select>
			<div
				[hidden]="flatnumber.valid || flatnumber.pristine"
				class="alert alert-danger"
				>Flat Number is required</div>
		</div>

		<div class="form-group">
			<label for="name">Name</label>
			<input
				type="text"
				class="form-control"
				list="residentNames"
				id="name"
				required
				[(ngModel)]="model.name"
				name="name"
				#name="ngModel"
				placeholder="name">
			<datalist id="residentNames">
				<option *ngFor="let resident of residents" [value]="resident.first_name">
				<!--option value="mohan">
				<option value="kumar"-->
			</datalist>
			<div
				[hidden]="name.valid || name.pristine"
				class="alert alert-danger"
				>Name is required</div>
		</div>

		<div class="form-group">
			<label for="forMonth">For the Month</label>
			<select
				class="form-control"
				id="forMonth"
				required
				[(ngModel)]="model.for_month"
				name="forMonth"
				#forMonth="ngModel">
				<option
					*ngFor="let month of months"
					[value]="month.number"
				 >{{month.shortName}}</option>
			</select>
			<div
				[hidden]="forMonth.valid || forMonth.pristine"
				class="alert alert-danger"
				>Month is required</div>
		</div>

		<div class="form-group">
			<label for="forYear">For the Year</label>
			<input
				type="number"
				class="form-control"
				id="forYear"
				required
				[(ngModel)]="model.for_year"
				name="forYear"
				#forYear="ngModel"
				min="2016"
				max="2020"
				placeholder="for the year">
			<div
				[hidden]="forYear.valid || forYear.pristine"
				class="alert alert-danger"
				>Year is required</div>
		</div>

		<div class="form-group">
			<input type="radio" value="cr" name="crdr" [(ngModel)]="model.crdr" required /> Cr
			<input type="radio" value="dr" name="crdr" [(ngModel)]="model.crdr" /> Dr
		</div>

		<div class="form-group">
			<label for="amount">Amount</label>
			<input
				type="number"
				step="0.01"
				class="form-control"
				id="amount"
				required
				[(ngModel)]="model.amount"
				name="amount"
				#amount="ngModel"
				placeholder="Amount here">
			<div
				[hidden]="amount.valid || amount.pristine"
				class="alert alert-danger"
				>Amount is required</div>
		</div>

		<div class="form-group">
			<label for="recordedAt">Date of Transaction</label>
			<input
				type="date"
				class="form-control"
				id="recordedAt"
				[(ngModel)]="model.recorded_at"
				name="recordedAt"
				#recordedAt="ngModel"
				placeholder="Date of Transaction here">
		</div>

		<button
			type="submit"
			class="btn btn-success"
			[disabled]="!detailForm.form.valid"
			[hidden]="hideSave"
			>Save</button>
		<button
			type="button"
			class="btn btn-link"
			(click)="gotoList()"
			>Cancel</button>

	</form>

</div>
